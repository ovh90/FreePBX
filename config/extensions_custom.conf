; Custom dialplan additions for Salama FreePBX (Germany VPS)
;
; NOTE:
; - Keep this file under version control in the private GitHub repo.
; - This provides logic that FreePBX GUI cannot express (DID-based menu split).

[custom-menu-split]
exten => s,1,NoOp(custom-menu-split: FROM_DID=${FROM_DID} CALLERID(dnid)=${CALLERID(dnid)})
 same => n,Set(__IN_DID=${IF($["${FROM_DID}"!=""]?${FROM_DID}:${CALLERID(dnid)})})
 same => n,NoOp(custom-menu-split: resolved IN_DID=${IN_DID})
 same => n,GotoIf($["${IN_DID}"="333" | "${IN_DID}"="888"]?ivr-3,s,1)
 same => n,Goto(ivr-2,s,1)
